- name: Start Oracle VM1
  hosts: windows
  gather_facts: no
  tasks:
    - name: Delete powershell script to pull the newest changes
      win_file:
        path: C:\Users\DELL\workspace\vm1\start_vm1.ps1
        state: absent

    - name: Copy PowerShell script to remote host
      win_copy:
        src: ~/bachelor/ansible-db/start_vm1.ps1
        dest: C:\Users\DELL\workspace\vm1\
      register: copy_result
    
    - name: Run PowerShell script
      win_shell: |
        powershell.exe -ExecutionPolicy Bypass -File "C:\Users\DELL\workspace\vm1\start_vm1.ps1"

- name: Start mysql service
  hosts: vm-1
  gather_facts: no
  become: yes
  tasks:
    - name: Download mysql files
      copy:
        src: ~/bachelor/ansible-db/mysql-sakila-db/
        dest: /root/ansible-db/mysql-sakila-db
        owner: root
        group: root        
        mode: 0777
